<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS: Eventos</title>
    <style>
        /* --- ESTILOS BASE --- */
        :root { --primary:#2563eb; --bg:#f8fafc; --card:#fff; --text:#0f172a; --muted:#475569; --border:#e2e8f0; --code-bg: #1e293b; }
        
        body { font-family:'Segoe UI', Tahoma, sans-serif; background:var(--bg); color:var(--text); margin:0; padding:22px; line-height:1.6; }
        
        .card { background:var(--card); border:1px solid var(--border); border-radius:14px; padding:30px; max-width:900px; margin:0 auto; box-shadow:0 8px 18px rgba(15,23,42,0.08); }
        
        h1 { color:var(--primary); margin-top:0; border-bottom: 2px solid var(--border); padding-bottom: 15px; }
        h2 { font-size: 1.2rem; margin-top: 30px; color: #334155; }
        
        .breadcrumb a { text-decoration:none; color:#94a3b8; font-size: 0.9rem; font-weight:600; }
        .breadcrumb a:hover { color: var(--primary); }

        /* --- ZONAS DE PRUEBA --- */
        .playground-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        @media (max-width: 768px) { .playground-grid { grid-template-columns: 1fr; } }

        .event-box {
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            padding: 15px;
            background: #fff;
            display: flex; flex-direction: column; gap: 10px;
        }
        .box-title { font-weight: bold; color: var(--primary); font-size: 0.9rem; border-bottom: 1px solid #f1f5f9; padding-bottom: 5px; margin-bottom: 5px; }

        /* Elementos Interactivos */
        .btn-test { background: #3b82f6; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer; font-weight: bold; transition: transform 0.1s; }
        .btn-test:active { transform: scale(0.95); }

        input { padding: 8px; border: 1px solid #cbd5e1; border-radius: 4px; width: 100%; box-sizing: border-box; }

        .live-text { font-size: 1.2rem; font-weight: bold; color: #475569; min-height: 30px; }

        /* CONSOLA VISUAL */
        .logger {
            margin-top: 20px;
            background: var(--code-bg);
            color: #bef264;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.85rem;
            height: 150px;
            overflow-y: auto;
            border: 1px solid #333;
        }
        .log-line { margin-bottom: 4px; border-bottom: 1px solid #333; padding-bottom: 2px; }
        .log-time { color: #64748b; margin-right: 10px; }
        .highlight { color: #f472b6; }

        .nav-links { display:flex; justify-content:space-between; align-items:center; margin-top:40px; padding-top: 20px; border-top: 1px solid var(--border); }
        .nav-links a { text-decoration:none; color:#0ea5e9; font-weight:700; }
    </style>
</head>
<body>
    <div class="card">
        <div class="breadcrumb"><a href="../index.html">← Volver al programa</a></div>
        
        <h1>Eventos: Dando vida a la web</h1>
        <p>JavaScript se queda dormido hasta que ocurre un "evento". Aquí aprenderás a despertarlo.</p>

        <div class="section">
            <h2>Laboratorio de Eventos</h2>
            <p>Interactúa con las 3 cajas y mira la consola negra abajo para ver qué está pasando "detrás de cámaras".</p>

            <div class="playground-grid">
                
                <div class="event-box">
                    <div class="box-title">Event: 'click'</div>
                    <p style="font-size:0.8rem; color:#64748b;">El más común. Detecta cuando el usuario pulsa y suelta.</p>
                    <button id="btn-click" class="btn-test">¡Hazme Click!</button>
                    <span id="click-counter">Clicks: 0</span>
                </div>

                <div class="event-box">
                    <div class="box-title">Event: 'input'</div>
                    <p style="font-size:0.8rem; color:#64748b;">Detecta cada letra que escribes, en tiempo real.</p>
                    <input type="text" id="input-realtime" placeholder="Escribe aquí...">
                    <div class="live-text" id="display-text">...</div>
                </div>

                <div class="event-box">
                    <div class="box-title">Event: 'submit'</div>
                    <p style="font-size:0.8rem; color:#64748b;">Vital: Usamos <code>preventDefault()</code> para evitar la recarga.</p>
                    <form id="form-demo">
                        <input type="email" id="email-demo" placeholder="Tu correo..." required style="margin-bottom:10px;">
                        <button type="submit" class="btn-test" style="background:#10b981; width:100%;">Enviar</button>
                    </form>
                </div>

            </div>

            <div class="logger" id="console-log">
                <div style="color:#64748b">// Esperando eventos...</div>
            </div>
        </div>

        <div class="section">
            <h3>El Código Secreto (Lo que debes aprender)</h3>
            <ul>
                <li><strong>Escuchar:</strong> <code>elemento.addEventListener('evento', funcion)</code>. Es la forma estándar de conectar HTML y JS.</li>
                <li><strong>Prevenir Recarga:</strong> En el ejemplo 3, si no pusiéramos <code>e.preventDefault()</code>, la página parpadearía y se borraría todo. ¡Pruébalo!</li>
                <li><strong>El objeto 'e':</strong> JS siempre te envía información del evento (qué tecla fue, coordenadas del mouse, etc) en una variable, usualmente llamada <code>e</code> o <code>event</code>.</li>
            </ul>
        </div>

        <div class="nav-links">
            <a href="js-dom.html">← Anterior: DOM</a>
            <a href="herramientas-vscode.html">Siguiente: Herramientas (VS Code) →</a>
        </div>
    </div>

    <script>
        // Utilidad para escribir en la consola negra
        const logger = document.getElementById('console-log');
        function log(msg, type) {
            const time = new Date().toLocaleTimeString();
            const color = type === 'submit' ? '#f472b6' : (type === 'input' ? '#22c55e' : '#60a5fa');
            logger.innerHTML = `<div class="log-line"><span class="log-time">[${time}]</span> <span style="color:${color}">${msg}</span></div>` + logger.innerHTML;
        }

        // --- 1. LÓGICA DE CLICK ---
        const btn = document.getElementById('btn-click');
        const counterDisplay = document.getElementById('click-counter');
        let count = 0;

        btn.addEventListener('click', function() {
            count++;
            counterDisplay.innerText = `Clicks: ${count}`;
            log(`CLICK detectado. Contador: ${count}`, 'click');
            
            // Efecto visual simple
            btn.style.transform = "scale(0.95)";
            setTimeout(() => btn.style.transform = "scale(1)", 100);
        });

        // --- 2. LÓGICA DE INPUT ---
        const inputField = document.getElementById('input-realtime');
        const displayText = document.getElementById('display-text');

        inputField.addEventListener('input', function(e) {
            // e.target.value es LO QUE HAY DENTRO del input
            const texto = e.target.value;
            displayText.innerText = texto || "...";
            log(`INPUT detectado: "${texto}"`, 'input');
        });

        // --- 3. LÓGICA DE SUBMIT ---
        const form = document.getElementById('form-demo');
        const emailInput = document.getElementById('email-demo');

        form.addEventListener('submit', function(e) {
            // ¡ESTO ES LO MÁS IMPORTANTE!
            e.preventDefault(); 
            // Sin la línea de arriba, la página se recarga y pierdes todo.

            const email = emailInput.value;
            alert(`✅ Formulario enviado correctamente.\nCorreo: ${email}`);
            log(`SUBMIT prevenido. Datos capturados: ${email}`, 'submit');
            
            // Limpiar campo
            emailInput.value = "";
        });
    </script>
</body>
</html>
